(function(){var e={4907:function(e,t,o){"use strict";var n=o(5130),a=o(2098),s=(o(4188),o(6768)),l=o(4232);const r={id:"app"};function c(e,t,o,a,c,i){const d=(0,s.g2)("el-header"),u=(0,s.g2)("el-col"),f=(0,s.g2)("el-row"),g=(0,s.g2)("el-card"),h=(0,s.g2)("el-checkbox"),w=(0,s.g2)("el-input"),p=(0,s.g2)("el-button"),k=(0,s.g2)("qrcode-vue"),b=(0,s.g2)("el-main"),m=(0,s.g2)("el-container");return(0,s.uX)(),(0,s.CE)("div",r,[(0,s.bF)(m,null,{default:(0,s.k6)((()=>[(0,s.bF)(d,null,{default:(0,s.k6)((()=>t[10]||(t[10]=[(0,s.eW)("OKX Connect")]))),_:1}),(0,s.bF)(b,null,{default:(0,s.k6)((()=>[(0,s.bF)(g,{class:"wallet-info"},{header:(0,s.k6)((()=>t[11]||(t[11]=[(0,s.Lk)("div",null,"钱包信息",-1)]))),default:(0,s.k6)((()=>[(0,s.bF)(f,{class:"info-row"},{default:(0,s.k6)((()=>[(0,s.bF)(u,{span:24},{default:(0,s.k6)((()=>[t[12]||(t[12]=(0,s.Lk)("strong",null,"Wallet Address:",-1)),(0,s.eW)(" "+(0,l.v_)(i.getWalletAddress),1)])),_:1})])),_:1}),(0,s.bF)(f,{class:"info-row"},{default:(0,s.k6)((()=>[(0,s.bF)(u,{span:24},{default:(0,s.k6)((()=>[t[13]||(t[13]=(0,s.Lk)("strong",null,"当前状态 :",-1)),(0,s.eW)(" "+(0,l.v_)(e.currentStatus),1)])),_:1})])),_:1})])),_:1}),(0,s.bF)(g,{class:"wallet-actions"},{header:(0,s.k6)((()=>t[14]||(t[14]=[(0,s.Lk)("div",null,"钱包操作",-1)]))),default:(0,s.k6)((()=>[(0,s.bF)(f,{class:"info-row"},{default:(0,s.k6)((()=>[(0,s.bF)(u,{span:24},{default:(0,s.k6)((()=>[(0,s.bF)(h,{modelValue:e.withUI,"onUpdate:modelValue":t[0]||(t[0]=t=>e.withUI=t),onChange:e.handleWithUI},{default:(0,s.k6)((()=>t[15]||(t[15]=[(0,s.eW)("是否展示UI")]))),_:1},8,["modelValue","onChange"])])),_:1})])),_:1}),(0,s.bF)(f,{gutter:12},{default:(0,s.k6)((()=>[(0,s.bF)(u,{span:24},{default:(0,s.k6)((()=>[(0,s.bF)(w,{modelValue:e.testProofPayload,"onUpdate:modelValue":t[1]||(t[1]=t=>e.testProofPayload=t),placeholder:"proofPayload"},null,8,["modelValue"])])),_:1})])),_:1}),e.showVerifyRow?((0,s.uX)(),(0,s.Wv)(f,{key:0,class:"info-row"},{default:(0,s.k6)((()=>[(0,s.bF)(u,{span:24},{default:(0,s.k6)((()=>[t[16]||(t[16]=(0,s.Lk)("strong",null,"签名验证:",-1)),(0,s.eW)(" "+(0,l.v_)(e.ProofPayloadVerify),1)])),_:1})])),_:1})):(0,s.Q3)("",!0),(0,s.bF)(f,{gutter:12,class:"button-row"},{default:(0,s.k6)((()=>[(0,s.bF)(u,{span:24},{default:(0,s.k6)((()=>[(0,s.bF)(p,{type:"primary",onClick:i.connectBtnClicked,icon:"el-icon-connection"},{default:(0,s.k6)((()=>[(0,s.eW)((0,l.v_)(e.connectStatusStr),1)])),_:1},8,["onClick"])])),_:1})])),_:1}),((0,s.uX)(),(0,s.Wv)(s.Im,{to:"body"},[e.showModal?((0,s.uX)(),(0,s.CE)("div",{key:0,class:"modal-overlay",onClick:t[4]||(t[4]=(...e)=>i.closeModal&&i.closeModal(...e))},[(0,s.Lk)("div",{class:"modal-content",onClick:t[3]||(t[3]=(0,n.D$)((()=>{}),["stop"]))},[(0,s.Lk)("button",{class:"close-button",onClick:t[2]||(t[2]=(...e)=>i.closeModal&&i.closeModal(...e))},"×"),t[17]||(t[17]=(0,s.Lk)("h2",null,"扫描二维码",-1)),(0,s.bF)(k,{value:e.qrValue,size:200,level:"H"},null,8,["value"])])])):(0,s.Q3)("",!0)])),(0,s.bF)(f,{gutter:12,class:"button-row"},{default:(0,s.k6)((()=>[(0,s.bF)(u,{span:24},{default:(0,s.k6)((()=>[(0,s.bF)(p,{type:"warning",onClick:i.resotreConnectAction,icon:"el-icon-refresh-right"},{default:(0,s.k6)((()=>t[18]||(t[18]=[(0,s.eW)("尝试重连")]))),_:1},8,["onClick"])])),_:1})])),_:1}),(0,s.bF)(f,{gutter:12,class:"button-row"},{default:(0,s.k6)((()=>[(0,s.bF)(u,{span:24},{default:(0,s.k6)((()=>[(0,s.bF)(p,{type:"danger",onClick:i.disconnectAction,icon:"el-icon-switch-button",disabled:0==e.walletAddress.length},{default:(0,s.k6)((()=>[(0,s.eW)((0,l.v_)(e.disconnectStatusStr),1)])),_:1},8,["onClick","disabled"])])),_:1})])),_:1})])),_:1}),(0,s.bF)(g,{class:"transaction"},{header:(0,s.k6)((()=>t[19]||(t[19]=[(0,s.Lk)("div",null,"交易",-1)]))),default:(0,s.k6)((()=>[(0,s.bF)(f,{gutter:12},{default:(0,s.k6)((()=>[(0,s.bF)(u,{span:8},{default:(0,s.k6)((()=>[(0,s.bF)(p,{type:"primary",onClick:t[5]||(t[5]=e=>i.mockSwap())},{default:(0,s.k6)((()=>t[20]||(t[20]=[(0,s.eW)("swap")]))),_:1})])),_:1}),(0,s.bF)(u,{span:8},{default:(0,s.k6)((()=>[(0,s.bF)(p,{type:"success",onClick:t[6]||(t[6]=e=>i.mockTransaction())},{default:(0,s.k6)((()=>t[21]||(t[21]=[(0,s.eW)("转账")]))),_:1})])),_:1})])),_:1}),(0,s.bF)(u,{xs:24,sm:12},{default:(0,s.k6)((()=>[t[22]||(t[22]=(0,s.Lk)("div",{class:"input-label"},"交易数据:",-1)),(0,s.bF)(w,{modelValue:e.testTransaction,"onUpdate:modelValue":t[7]||(t[7]=t=>e.testTransaction=t),placeholder:"sendTransactions"},null,8,["modelValue"])])),_:1}),(0,s.bF)(u,{xs:24,sm:12},{default:(0,s.k6)((()=>[t[23]||(t[23]=(0,s.Lk)("div",{class:"input-label"},"签名结果 :",-1)),(0,s.bF)(w,{modelValue:e.testboc,"onUpdate:modelValue":t[8]||(t[8]=t=>e.testboc=t),placeholder:"boc"},null,8,["modelValue"])])),_:1}),(0,s.bF)(f,{gutter:12,class:"button-row"},{default:(0,s.k6)((()=>[(0,s.bF)(u,{span:24},{default:(0,s.k6)((()=>[(0,s.bF)(p,{type:"primary",onClick:t[9]||(t[9]=e=>i.sendTransaction())},{default:(0,s.k6)((()=>[(0,s.eW)((0,l.v_)(e.testTransactionStr),1)])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])}var i=o(9273),d=o(7805),u=o(9877),f="en_US",g=d.THEME.LIGHT,h={name:"App",components:{QrcodeVue:u.Ay},data:()=>({testTopic:"",testPublicKey:"",testProofPayload:"",pendingDeepLink:"-",logList:[],connectReady:!1,connectStatusStr:"连接钱包",disconnectStatusStr:"断开钱包",localPubKey:"",localSecKey:"",testTransaction:"",testTransactionStr:"发送交易",walletAddress:"",testboc:"",ProofPayloadVerify:"",showModal:!1,showVerifyRow:!1,qrValue:"https://www.okx.com/download",currentStatus:"",language:f,theme:g,THEME:d.THEME,withUI:"true"==localStorage.getItem("autoRefresh"),handleWithUI:e=>{localStorage.setItem("autoRefresh",`${e}`),location.reload()}}),computed:{getWalletAddress:function(){return this.walletAddress}},methods:{async connectBtnClicked(){console.log(`encryptStoreMsg   connectBtnClicked  ${Date.now()}`),this.testTonSdk()},async disconnectAction(){try{console.log("get disconnect wallet btn clicked"),await window.provider.disconnect()}catch(e){console.log("Disconnect  error ==>> ",e.message),this.currentStatus=e.message}},async resotreConnectAction(){console.log("get restore wallet btn clicked"),window.provider.restoreConnection()},async mockSwap(){var e={messages:[{address:"EQARULUYsmJq1RiZ-YiH-IJLcAZUVkVff-KBPwEmmaQGH6aC",amount:"205000000",payload:"te6cckEBAgEAhwABbQ+KfqUAAADNgG7tIEATEtAIAO87mQKicbKgHIk4pSPP4k5xhHqutqYgAB7USnesDnCcECwbgQMBAJUlk4VhgBD3JEg1TUr75iTijBghOKm/sxNDXUBl7CD6WMut0Q85x4RafwA/Es89DBXoTxuqxVFxyBbzt9Rav2HBUKl7hmkvLuKHLBCW57aK"}],validUntil:1792481054,network:-239};this.testTransaction=JSON.stringify(e)},async mockTransaction(){let e=window.provider.account,t=e.address;var o={messages:[{address:"UQDXlIPZgiC7ugBqdg68ZQ4zBVGaTEfTQd1ywCDB8exACtQK",amount:11e5}],valid_until:1792481054,from:t,network:"-239"};this.testTransaction=JSON.stringify(o)},async mockTransactionNFT(){var e={from:"EQD8Szz0MFehPG6rFUXHIFvO31Fq_YcFQqXuGaS8u4ocsMqN",messages:[{address:"EQBpDpRrE3b4g01AXoyCQbnUGTpVCCgCBGyTPWvKvwDyQKqZ",amount:"20000000",payload:"te6cckEBAQEAUwAAoV/MPRQAAAAAAAAAAIAa8pB7MEQXd0ANTsHXjKHGYKozSYj6aDuuWAQYPj2IAVAD8Szz0MFehPG6rFUXHIFvO31Fq/YcFQqXuGaS8u4ocsAgKGBCo0E="}],valid_until:1792481054,network:"-239"};this.testTransaction=JSON.stringify(e)},async sendTransaction(){if(console.log("sendTransaction"),console.log("sendTransaction内容------",this.testTransaction),this.testTransaction){const o=JSON.parse(this.testTransaction);try{var e=await window.provider.sendTransaction(o);this.testboc=e.boc}catch(t){t.code===i.OKX_CONNECT_ERROR_CODES.USER_REJECTS_ERROR?this.testboc="用户拒绝交易":this.testboc="签名错误！"}}else alert("交易数据为空，请选则或输入交易数据。")},async testTonSdk(){if(window.provider.connected)console.log("you have connected wallet");else{console.log("APP ---connect Proof---\x3e>>>----",this.testProofPayload);let e={tonProof:this.testProofPayload,redirect:"tg://resolve",tmaReturnUrl:"tg://resolve"};this.isPC(),!this.isSafariOrChrome()||window?.TelegramWebview||window?.TelegramWebviewProxy||(e.redirect=null),console.log("Is Mobile ==>",e),window.provider instanceof d.OKXTonConnectUI?(this.testProofPayload&&window.provider.setConnectRequestParameters({state:"ready",value:{tonProof:this.testProofPayload}}),await window.provider.openModal()):window.provider instanceof i.OKXTonConnect&&window.provider.connect(e).then((e=>{console.log("Current Url ---:",e),e&&this.isPC()&&(this.qrValue=e,this.showModal=!0)}))}},closeModal(){this.showModal=!1},isPC(){const e=navigator.userAgent;console.log("current device ua is ===>",e);const t=["Android","iPhone","SymbianOS","Windows Phone","iPad","iPod"];let o=!0;for(let n=0;n<t.length;n++)if(e.indexOf(t[n])>0){o=!1;break}return o},isSafariOrChrome(){const e=navigator.userAgent,t=["Safari","Chrome"];let o=!1;for(let n=0;n<t.length;n++)if(e.indexOf(t[n])>0){o=!0;break}return o}},created(){for(const e of Object.values(i.OKX_TON_CONNECTION_AND_TRANSACTION_EVENT))console.log(e),window.addEventListener(e,(t=>{console.log(e,t.detail),this.currentStatus=e}));window.addEventListener("okx-ton-connect-connection-info-before-jump",(e=>{console.log("链接详情   :::",e.detail)}))},mounted(){var e,t=document.createElement("script");t.src="https://telegram.org/js/telegram-web-app.js",t.id="tgsdk",document.getElementsByTagName("head")[0].appendChild(t),this.connectReady=!0,document.title="OKX Connect TON",this.withUI?(console.log("---init wallet UI--"),e=new d.OKXTonConnectUI({dappMetaData:{name:"OKX TON Connect Demo",icon:"https://avatars.githubusercontent.com/u/37784886"},actionsConfiguration:{returnStrategy:"tg://resolve",tmaReturnUrl:"back",modals:"all"},uiPreferences:{theme:d.THEME.LIGHT},language:"en_US"})):(console.log("---init wallet---"),e=new i.OKXTonConnect({metaData:{name:"OKX TON Connect Demo",icon:"https://avatars.githubusercontent.com/u/37784886"}})),window.provider=e,window.provider.onStatusChange((e=>{if(console.log("APP ---TON.onStatusChange>>----",e),e){if(this.walletAddress=e.account.address,this.testProofPayload){var t={address:this.walletAddress,network:e.account.chain,public_key:e.account.publicKey,proof:{...e.connectItems.tonProof.proof,state_init:e.account.walletStateInit}};console.log(`checkProof => ${JSON.stringify(t)}`)}else this.ProofPayloadVerify=": no proof";this.showModal=!1}else this.walletAddress="disconnected"}),(e=>{this.showModal=!1,e.code===i.OKX_CONNECT_ERROR_CODES.USER_REJECTS_ERROR?this.walletAddress=`用户拒绝链接: code(${e.code}) `:this.walletAddress=`链接报错: code(${e.code})  ${e.message}`}))}},w=o(1241);const p=(0,w.A)(h,[["render",c],["__scopeId","data-v-6de8d5d0"]]);var k=p;const b=(0,n.Ef)(k);b.use(a.A),b.mount("#app")},9432:function(){},477:function(){},1281:function(){}},t={};function o(n){var a=t[n];if(void 0!==a)return a.exports;var s=t[n]={exports:{}};return e[n].call(s.exports,s,s.exports,o),s.exports}o.m=e,function(){o.amdO={}}(),function(){var e=[];o.O=function(t,n,a,s){if(!n){var l=1/0;for(d=0;d<e.length;d++){n=e[d][0],a=e[d][1],s=e[d][2];for(var r=!0,c=0;c<n.length;c++)(!1&s||l>=s)&&Object.keys(o.O).every((function(e){return o.O[e](n[c])}))?n.splice(c--,1):(r=!1,s<l&&(l=s));if(r){e.splice(d--,1);var i=a();void 0!==i&&(t=i)}}return t}s=s||0;for(var d=e.length;d>0&&e[d-1][2]>s;d--)e[d]=e[d-1];e[d]=[n,a,s]}}(),function(){o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,{a:t}),t}}(),function(){o.d=function(e,t){for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={524:0};o.O.j=function(t){return 0===e[t]};var t=function(t,n){var a,s,l=n[0],r=n[1],c=n[2],i=0;if(l.some((function(t){return 0!==e[t]}))){for(a in r)o.o(r,a)&&(o.m[a]=r[a]);if(c)var d=c(o)}for(t&&t(n);i<l.length;i++)s=l[i],o.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return o.O(d)},n=self["webpackChunkokxconnectdemo"]=self["webpackChunkokxconnectdemo"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var n=o.O(void 0,[504],(function(){return o(4907)}));n=o.O(n)})();
//# sourceMappingURL=app.23bf085e.js.map